/*! For license information please see MatrixInput.js.LICENSE.txt */
!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";e=function(){return r};var n,r={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",d=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(n){h=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof $?e:$,a=Object.create(i.prototype),o=new A(r||[]);return s(a,"_invoke",{value:I(t,n,o)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=u;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function $(){}function b(){}function E(){}var C={};h(C,l,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==i&&a.call(w,l)&&(C=w);var S=E.prototype=$.prototype=Object.create(C);function M(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function B(e,n){function r(i,s,o,l){var d=f(e[i],e,s);if("throw"!==d.type){var c=d.arg,h=c.value;return h&&"object"==t(h)&&a.call(h,"__await")?n.resolve(h.__await).then((function(t){r("next",t,o,l)}),(function(t){r("throw",t,o,l)})):n.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,l)}))}l(d.arg)}var i;s(this,"_invoke",{value:function(t,e){function a(){return new n((function(n,i){r(t,e,n,i)}))}return i=i?i.then(a,a):a()}})}function I(t,e,r){var i=p;return function(a,s){if(i===m)throw new Error("Generator is already running");if(i===v){if("throw"===a)throw s;return{value:n,done:!0}}for(r.method=a,r.arg=s;;){var o=r.delegate;if(o){var l=G(o,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var d=f(t,e,r);if("normal"===d.type){if(i=r.done?v:y,d.arg===g)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(i=v,r.method="throw",r.arg=d.arg)}}}function G(t,e){var r=e.method,i=t.iterator[r];if(i===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,G(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=f(i,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,g;var s=a.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return s.next=s}}throw new TypeError(t(e)+" is not iterable")}return b.prototype=E,s(S,"constructor",{value:E,configurable:!0}),s(E,"constructor",{value:b,configurable:!0}),b.displayName=h(E,c,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,h(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},M(B.prototype),h(B.prototype,d,(function(){return this})),r.AsyncIterator=B,r.async=function(t,e,n,i,a){void 0===a&&(a=Promise);var s=new B(u(t,e,n,i),a);return r.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},M(S),h(S,c,"Generator"),h(S,l,(function(){return this})),h(S,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=L,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return o.type="throw",o.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),d=a.call(s,"finallyLoc");if(l&&d){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),g}},r}function n(t,e,n,r,i,a,s){try{var o=t[a](s),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,i)}!function(t){var r,i;Craft.MatrixInput=Garnish.Base.extend({id:null,entryTypes:null,entryTypesByHandle:null,inputNamePrefix:null,inputIdPrefix:null,showingAddEntryMenu:!1,addEntryBtnGroupWidth:null,addEntryBtnContainerWidth:null,$container:null,$form:null,$entriesContainer:null,$addEntryBtnContainer:null,$addEntryBtnGroup:null,$addEntryBtnGroupBtns:null,$addEntryMenuBtn:null,$statusMessage:null,entrySort:null,entrySelect:null,addingEntry:!1,init:function(e,n,r,i){var s=this;this.id=e,this.entryTypes=n,this.inputNamePrefix=r,this.inputIdPrefix=Craft.formatInputId(this.inputNamePrefix),"number"==typeof i&&(i={maxEntries:i}),this.setSettings(i,Craft.MatrixInput.defaults),this.$container=t("#"+this.id),this.$form=this.$container.closest("form"),this.$entriesContainer=this.$container.children(".blocks"),this.$addEntryBtnContainer=this.$container.children(".buttons"),this.$addEntryBtnGroup=this.$addEntryBtnContainer.children(".btngroup"),this.$addEntryBtnGroupBtns=this.$addEntryBtnGroup.children(".btn"),this.$addEntryMenuBtn=this.$addEntryBtnContainer.children(".menubtn"),this.$statusMessage=this.$container.find("[data-status-message]"),this.$container.data("matrix",this),this.setNewEntryBtn(),this.entryTypesByHandle={};for(var o=0;o<this.entryTypes.length;o++){var l=this.entryTypes[o];this.entryTypesByHandle[l.handle]=l}var d=this.$entriesContainer.children(),c=Craft.MatrixInput.getCollapsedEntryIds();if(d.length>0&&t(d[0]).hasClass("matrixblock"))for(var h=0;h<d.length;h++){var u=t(d[h]).find(".matrixblock-tabs");u.length>0&&Craft.cp.initMatrixTabs(u)}this.entrySort=new Garnish.DragSort(d,{handle:"> .actions > .move",axis:"y",filter:function(){return s.entrySort.$targetItem.hasClass("sel")?s.entrySelect.getSelectedItems():s.entrySort.$targetItem},collapseDraggees:!0,magnetStrength:4,helperLagBase:1.5,helperOpacity:.9,onDragStop:function(){s.trigger("entrySortDragStop")},onSortChange:function(){s.entrySelect.resetItemOrder()}}),this.entrySelect=new Garnish.Select(this.$entriesContainer,d,{multi:!0,vertical:!0,handle:"> .checkbox, > .titlebar",filter:":not(.tab-label)",checkboxMode:!0});for(var f=0;f<d.length;f++){var p=t(d[f]),y=new a(this,p);y.id&&-1!==t.inArray(""+y.id,c)&&y.collapse()}this.addListener(this.$addEntryBtnGroupBtns,"click",(function(e){var n=t(e.currentTarget).addClass("loading");this.addEntry(n.data("type")).then((function(){n.removeClass("loading")}))})),this.$addEntryMenuBtn.length&&(this.$addEntryMenuBtn.menubtn(),this.$addEntryMenuBtn.data("menubtn").on("optionSelect",(function(e){s.$addEntryMenuBtn.addClass("loading"),s.addEntry(t(e.option).data("type")).then((function(){s.$addEntryMenuBtn.removeClass("loading")}))}))),this.updateAddEntryBtn(),this.addListener(this.$container,"resize","setNewEntryBtn"),Garnish.$doc.ready(this.setNewEntryBtn.bind(this)),this.trigger("afterInit")},setNewEntryBtn:function(){var t=this;(this.addEntryBtnGroupWidth||(this.addEntryBtnGroupWidth=this.$addEntryBtnGroup.width(),this.addEntryBtnGroupWidth))&&this.addEntryBtnContainerWidth!==(this.addEntryBtnContainerWidth=this.$addEntryBtnContainer.width())&&(this.addEntryBtnGroupWidth>this.addEntryBtnContainerWidth?this.showingAddEntryMenu||(this.$addEntryBtnGroup.addClass("hidden"),this.$addEntryMenuBtn.removeClass("hidden"),this.showingAddEntryMenu=!0):this.showingAddEntryMenu&&(this.$addEntryMenuBtn.addClass("hidden"),this.$addEntryBtnGroup.removeClass("hidden"),this.showingAddEntryMenu=!1,-1!==navigator.userAgent.indexOf("Safari")&&Garnish.requestAnimationFrame((function(){t.$addEntryBtnGroup.css("opacity",.99),Garnish.requestAnimationFrame((function(){t.$addEntryBtnGroup.css("opacity","")}))}))))},canAddMoreEntries:function(){return!this.maxEntries||this.$entriesContainer.children().length<this.maxEntries},updateAddEntryBtn:function(){if(this.canAddMoreEntries()){this.$addEntryBtnGroup.removeClass("disabled"),this.$addEntryMenuBtn.removeClass("disabled"),this.$addEntryBtnGroupBtns.each((function(){t(this).removeAttr("aria-disabled")}));for(var e=0;e<this.entrySelect.$items.length;e++){var n=this.entrySelect.$items.eq(e).data("entry");n&&(n.$actionMenu.find("button[data-action=add]").parent().removeClass("disabled"),n.$actionMenu.find("button[data-action=add]").removeAttr("aria-disabled"))}}else{this.$addEntryBtnGroup.addClass("disabled"),this.$addEntryMenuBtn.addClass("disabled"),this.$addEntryBtnGroupBtns.each((function(){t(this).attr("aria-disabled","true")}));for(var r=0;r<this.entrySelect.$items.length;r++){var i=this.entrySelect.$items.eq(r).data("entry");i&&(i.$actionMenu.find("button[data-action=add]").parent().addClass("disabled"),i.$actionMenu.find("button[data-action=add]").attr("aria-disabled","true"))}}},updateStatusMessage:function(){var t,e=this;this.$statusMessage.empty(),this.canAddMoreEntries()||(t=Craft.t("app","Entry could not be added. Maximum number of entries reached.")),setTimeout((function(){e.$statusMessage.text(t)}),250)},addEntry:(r=e().mark((function n(r,i,s){var o,l,d,c,h=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.addingEntry){e.next=2;break}return e.abrupt("return");case 2:if(this.canAddMoreEntries()){e.next=5;break}return this.updateStatusMessage(),e.abrupt("return");case 5:return this.addingEntry=!0,e.next=8,Craft.sendActionRequest("POST","matrix/render-block",{data:{fieldId:this.settings.fieldId,entryTypeId:this.entryTypesByHandle[r].id,ownerId:this.settings.ownerId,ownerElementType:this.settings.ownerElementType,siteId:this.settings.siteId,namespace:this.settings.namespace}});case 8:o=e.sent,l=o.data,d=t(l.blockHtml),(c=this.$form.data("elementEditor"))&&c.pause(),d.hasClass("matrixblock")&&Craft.cp.initMatrixTabs(d),i?d.insertBefore(i):d.appendTo(this.$entriesContainer),this.trigger("entryAdded",{$entry:d}),d.css(this.getHiddenEntryCss(d)).velocity({opacity:1,"margin-bottom":10},"fast",(function(){d.css("margin-bottom",""),Craft.initUiElements(d.children(".fields")),Craft.appendHeadHtml(l.headHtml),Craft.appendBodyHtml(l.bodyHtml),new a(h,d),h.entrySort.addItems(d),h.entrySelect.addItems(d),h.updateAddEntryBtn(),Garnish.requestAnimationFrame((function(){(void 0===s||s)&&(Garnish.scrollContainerToElement(d),d.find(".flex-fields :focusable").first().trigger("focus")),c&&c.resume()}))})),this.addingEntry=!1;case 18:case"end":return e.stop()}}),n,this)})),i=function(){var t=this,e=arguments;return new Promise((function(i,a){var s=r.apply(t,e);function o(t){n(s,i,a,o,l,"next",t)}function l(t){n(s,i,a,o,l,"throw",t)}o(void 0)}))},function(t,e,n){return i.apply(this,arguments)}),getEntryTypeByHandle:function(t){for(var e=0;e<this.entryTypes.length;e++)if(this.entryTypes[e].handle===t)return this.entryTypes[e]},collapseSelectedEntries:function(){this.callOnSelectedEntries("collapse")},expandSelectedEntries:function(){this.callOnSelectedEntries("expand")},disableSelectedEntries:function(){this.callOnSelectedEntries("disable")},enableSelectedEntries:function(){this.callOnSelectedEntries("enable")},deleteSelectedEntries:function(){this.callOnSelectedEntries("selfDestruct")},callOnSelectedEntries:function(t){for(var e=0;e<this.entrySelect.$selectedItems.length;e++)this.entrySelect.$selectedItems.eq(e).data("entry")[t]()},getHiddenEntryCss:function(t){return{opacity:0,marginBottom:-t.outerHeight()}},get maxEntries(){return this.settings.maxEntries}},{defaults:{fieldId:null,maxEntries:null,namespace:null,ownerElementType:null,ownerId:null,siteId:null,staticEntries:!1},collapsedEntryStorageKey:"Craft-"+Craft.systemUid+".MatrixInput.collapsedEntries",getCollapsedEntryIds:function(){return"string"==typeof localStorage[Craft.MatrixInput.collapsedEntryStorageKey]?Craft.filterArray(localStorage[Craft.MatrixInput.collapsedEntryStorageKey].split(",")):[]},setCollapsedEntryIds:function(t){localStorage[Craft.MatrixInput.collapsedEntryStorageKey]=t.join(",")},rememberCollapsedEntryId:function(e){if("undefined"!=typeof Storage){var n=Craft.MatrixInput.getCollapsedEntryIds();-1===t.inArray(""+e,n)&&(n.push(e),Craft.MatrixInput.setCollapsedEntryIds(n))}},forgetCollapsedEntryId:function(e){if("undefined"!=typeof Storage){var n=Craft.MatrixInput.getCollapsedEntryIds(),r=t.inArray(""+e,n);-1!==r&&(n.splice(r,1),Craft.MatrixInput.setCollapsedEntryIds(n))}}});var a=Garnish.Base.extend({matrix:null,$container:null,$titlebar:null,$tabsContainer:null,$fieldsContainer:null,$previewContainer:null,$actionMenu:null,$collapsedInput:null,actionDisclosure:null,isNew:null,id:null,collapsed:!1,init:function(t,e){var n=this;this.matrix=t,this.$container=e,this.$titlebar=e.children(".titlebar"),this.$tabsContainer=this.$titlebar.children(".matrixblock-tabs"),this.$previewContainer=this.$titlebar.children(".preview"),this.$fieldsContainer=e.children(".fields"),this.$container.data("entry",this),this.id=this.$container.data("id"),this.isNew=!this.id||"string"==typeof this.id&&"new"===this.id.substring(0,3);var r=this.$container.find("> .actions .action-btn"),i=r.data("trigger")||new Garnish.DisclosureMenu(r);this.$actionMenu=i.$container,this.actionDisclosure=i,i.on("show",(function(){n.$container.addClass("active"),n.$container.prev(".matrixblock").length?n.$actionMenu.find("button[data-action=moveUp]:first").parent().removeClass("hidden"):n.$actionMenu.find("button[data-action=moveUp]:first").parent().addClass("hidden"),n.$container.next(".matrixblock").length?n.$actionMenu.find("button[data-action=moveDown]:first").parent().removeClass("hidden"):n.$actionMenu.find("button[data-action=moveDown]:first").parent().addClass("hidden")})),i.on("hide",(function(){n.$container.removeClass("active")})),this.$actionMenuOptions=this.$actionMenu.find("button[data-action]"),this.addListener(this.$actionMenuOptions,"activate",this.handleActionClick),Garnish.hasAttr(this.$container,"data-collapsed")&&this.collapse(),this._handleTitleBarClick=function(t){t.preventDefault(),this.toggle()},this.addListener(this.$titlebar,"doubletap",this._handleTitleBarClick)},toggle:function(){this.collapsed?this.expand():this.collapse(!0)},collapse:function(e){var n=this;if(!this.collapsed){this.$container.addClass("collapsed");for(var r="",i=this.$fieldsContainer.children().children(),a=0;a<i.length;a++){for(var s=t(i[a]).children(".input").find('select,input[type!="hidden"],textarea,.label'),o="",l=0;l<s.length;l++){var d=t(s[l]),c=void 0;if(d.hasClass("label")){var h=d.parent().parent();if(h.hasClass("lightswitch")&&(h.hasClass("on")&&d.hasClass("off")||!h.hasClass("on")&&d.hasClass("on")))continue;c=d.text()}else c=Craft.getText(this._inputPreviewText(d));Array.isArray(c)&&(c=c.join(", ")),c&&(c=Craft.escapeHtml(c).trim())&&(o&&(o+=", "),o+=c)}o&&(r+=(r?" <span>|</span> ":"")+o)}this.$previewContainer.html(r),this.$fieldsContainer.velocity("stop"),this.$tabsContainer.velocity("stop"),this.$container.velocity("stop"),e&&!Garnish.prefersReducedMotion()?(this.$fieldsContainer.velocity("fadeOut",{duration:"fast"}),this.$container.velocity({height:32},"fast")):(this.$previewContainer.show(),this.$fieldsContainer.hide(),this.$container.css({height:32})),this.$tabsContainer.hide(),setTimeout((function(){n.$actionMenu.find("button[data-action=collapse]:first").parent().addClass("hidden"),n.$actionMenu.find("button[data-action=expand]:first").parent().removeClass("hidden")}),200),this.isNew?this.$collapsedInput?this.$collapsedInput.val("1"):this.$collapsedInput=t('<input type="hidden" name="'+this.matrix.inputNamePrefix+"[entries]["+this.id+'][collapsed]" value="1"/>').appendTo(this.$container):Craft.MatrixInput.rememberCollapsedEntryId(this.id),this.collapsed=!0}},_inputPreviewText:function(e){if(e.is("select,multiselect")){for(var n=[],r=e.find("option:selected"),i=0;i<r.length;i++)n.push(r.eq(i).text());return n}if(e.is('input[type="checkbox"]:checked,input[type="radio"]:checked')){var a=e.attr("id"),s=t('label[for="'.concat(a,'"]'));if(s.length)return s.text()}return Garnish.getInputPostVal(e)},expand:function(){var e=this;if(this.collapsed){this.$container.removeClass("collapsed"),this.$fieldsContainer.velocity("stop"),this.$container.velocity("stop");var n=this.$container.height();this.$container.height("auto"),this.$fieldsContainer.show();var r=this.$container.height(),i=this.$fieldsContainer.css("display")||"block";this.$container.height(n),this.$fieldsContainer.hide().velocity("fadeIn",{duration:"fast",display:i});var a=Garnish.prefersReducedMotion()?0:"fast";if(this.$container.velocity({height:r},a,(function(){e.$previewContainer.html(""),e.$container.height("auto"),e.$container.trigger("scroll"),e.$tabsContainer.show()})),setTimeout((function(){e.$actionMenu.find("button[data-action=collapse]:first").parent().removeClass("hidden"),e.$actionMenu.find("button[data-action=expand]:first").parent().addClass("hidden")}),200),!this.isNew&&"undefined"!=typeof Storage){var s=Craft.MatrixInput.getCollapsedEntryIds(),o=t.inArray(""+this.id,s);-1!==o&&(s.splice(o,1),Craft.MatrixInput.setCollapsedEntryIds(s))}this.isNew?this.$collapsedInput&&this.$collapsedInput.val(""):Craft.MatrixInput.forgetCollapsedEntryId(this.id),this.collapsed=!1}},disable:function(){var t=this;this.$container.children('input[name$="[enabled]"]:first').val(""),this.$container.addClass("disabled-entry"),setTimeout((function(){t.$actionMenu.find("button[data-action=disable]:first").parent().addClass("hidden"),t.$actionMenu.find("button[data-action=enable]:first").parent().removeClass("hidden")}),200),this.collapse(!0)},enable:function(){var t=this;this.$container.children('input[name$="[enabled]"]:first').val("1"),this.$container.removeClass("disabled-entry"),setTimeout((function(){t.$actionMenu.find("button[data-action=disable]:first").parent().removeClass("hidden"),t.$actionMenu.find("button[data-action=enable]:first").parent().addClass("hidden")}),200)},moveUp:function(){this.matrix.trigger("beforeMoveEntryUp",{entry:this});var t=this.$container.prev(".matrixblock");t.length&&(this.$container.insertBefore(t),this.matrix.entrySelect.resetItemOrder()),this.matrix.trigger("moveEntryUp",{entry:this})},moveDown:function(){this.matrix.trigger("beforeMoveEntryDown",{entry:this});var t=this.$container.next(".matrixblock");t.length&&(this.$container.insertAfter(t),this.matrix.entrySelect.resetItemOrder()),this.matrix.trigger("moveEntryDown",{entry:this})},handleActionClick:function(t){t.preventDefault(),this.onActionSelect(t.target)},onActionSelect:function(e){var n=this.matrix.entrySelect.totalSelected>1&&this.matrix.entrySelect.isSelected(this.$container),r=t(e);switch(r.data("action")){case"collapse":n?this.matrix.collapseSelectedEntries():this.collapse(!0);break;case"expand":n?this.matrix.expandSelectedEntries():this.expand();break;case"disable":n?this.matrix.disableSelectedEntries():this.disable();break;case"enable":n?this.matrix.enableSelectedEntries():(this.enable(),this.expand());break;case"moveUp":this.moveUp();break;case"moveDown":this.moveDown();break;case"add":var i=r.data("type");this.matrix.addEntry(i,this.$container);break;case"delete":n?confirm(Craft.t("app","Are you sure you want to delete the selected entries?"))&&this.matrix.deleteSelectedEntries():this.selfDestruct()}this.actionDisclosure.hide()},selfDestruct:function(){var e=this;t("[name]",this.$container).removeAttr("name"),this.$container.velocity(this.matrix.getHiddenEntryCss(this.$container),"fast",(function(){e.$container.remove(),e.matrix.updateAddEntryBtn(),e.matrix.trigger("entryDeleted",{$entry:e.$container})}))}})}(jQuery)}();
//# sourceMappingURL=MatrixInput.js.map