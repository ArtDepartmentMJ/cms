{"version":3,"file":"Authenticator.js","mappings":"YAAA,IAAWA,IAgDRC,OA7CDC,MAAMC,cAAgBC,QAAQC,KAAKC,OACjC,CACEC,mBAAoB,KACpBC,mBAAoB,KAEpBC,KAAM,SAAUC,GACdC,KAAKJ,mBAAqBP,EAAE,aAC5BW,KAAKH,mBAAqBR,EAAE,eAC5BW,KAAKC,YAAYF,EAAUR,MAAMC,cAAcU,UAE/CF,KAAKG,YAAYH,KAAKH,mBAAoB,SAAU,cACtD,EAEAO,YAAa,SAAUC,GAAI,WACzBC,QAAQC,IAAI,mBACIF,EAAGG,cAAcC,SAI/BH,QAAQC,IAAI,aACZhB,MAAMmB,kBAAkB,OAAQV,KAAKD,SAASY,mBAC3CC,MAAK,SAACC,GACL,IAAIC,EACF,mCACAD,EAASE,KAAKD,OACd,SACF,EAAKlB,mBAAmBoB,KAAK,IAAIC,OAAOH,EAC1C,IAAE,OACK,SAACI,GACN3B,MAAM4B,GAAGC,aAAaF,EAAEL,SAASE,KAAKM,QACxC,KAGFrB,KAAKJ,mBAAmBoB,KAAK,GAEjC,GAEF,CACEd,SAAU,CACRS,kBAAmB,mCAKzB,IAAIpB,MAAMC,a","sources":["webpack:///./Authenticator.js"],"sourcesContent":["(function ($) {\n  /** global: Craft */\n  /** global: Garnish */\n  Craft.Authenticator = Garnish.Base.extend(\n    {\n      $qrSecretContainer: null,\n      $enable2faCheckbox: null,\n\n      init: function (settings) {\n        this.$qrSecretContainer = $('#qrSecret');\n        this.$enable2faCheckbox = $('#require2fa');\n        this.setSettings(settings, Craft.Authenticator.defaults);\n\n        this.addListener(this.$enable2faCheckbox, 'change', 'getQrSecret');\n      },\n\n      getQrSecret: function (ev) {\n        console.log('lets get stuff!');\n        let isChecked = ev.currentTarget.checked;\n\n        if (isChecked) {\n          // get qr and secret\n          console.log('get stuff');\n          Craft.sendActionRequest('POST', this.settings.getQrSecretAction)\n            .then((response) => {\n              let secret =\n                '<div class=\"secret\">Secret Key: ' +\n                response.data.secret +\n                '</div>';\n              this.$qrSecretContainer.html('').append(secret);\n            })\n            .catch((e) => {\n              Craft.cp.displayError(e.response.data.message);\n            });\n        } else {\n          // clear out container\n          this.$qrSecretContainer.html('');\n        }\n      },\n    },\n    {\n      defaults: {\n        getQrSecretAction: 'authenticator/enable2fa-step1',\n      },\n    }\n  );\n\n  new Craft.Authenticator();\n})(jQuery);\n"],"names":["$","jQuery","Craft","Authenticator","Garnish","Base","extend","$qrSecretContainer","$enable2faCheckbox","init","settings","this","setSettings","defaults","addListener","getQrSecret","ev","console","log","currentTarget","checked","sendActionRequest","getQrSecretAction","then","response","secret","data","html","append","e","cp","displayError","message"],"sourceRoot":""}