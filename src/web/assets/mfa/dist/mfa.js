!function(){var e;e=jQuery,Craft.Mfa=Garnish.Base.extend({$qrSecretContainer:null,$enableMfaCheckbox:null,$verificationContainer:null,$verificationCodeInput:null,init:function(t){console.log("asd"),this.$qrSecretContainer=e("#qr-container"),this.$enableMfaCheckbox=e("#requireMfa"),this.$verificationContainer=e("#verifyContainer"),this.$verifyButton=this.$verificationContainer.find("button"),this.$verificationCodeInput=this.$verificationContainer.find('input[name="verificationCode"]'),this.setSettings(t,Craft.Authentication.defaults),this.addListener(this.$enableMfaCheckbox,"change","getQrCode"),this.addListener(this.$verifyButton,"click","verifyCode")},verifyCode:function(e){var t=this,i=this.$verificationCodeInput.val();console.log(i),void 0!==i&&i.length>0&&Craft.sendActionRequest("POST",this.settings.verifyAction,{data:{verificationCode:i}}).then((function(e){t.$qrSecretContainer.html(""),t.$verificationContainer.html("").append("Verified"),Craft.cp.displayNotice(e.data.message)})).catch((function(e){Craft.cp.displayError(e.response.data.message)}))},getQrCode:function(e){var t=this;e.currentTarget.checked?Craft.sendActionRequest("POST",this.settings.getQrCodeAction).then((function(e){var i='<div class="secret">Secret Key (input without spaces): '+e.data.secret+"</div>",n='<div class="qrCode">QR Code: '+e.data.qrCode+"</div>";t.$qrSecretContainer.html("").append(i).append(n)})).catch((function(e){Craft.cp.displayError(e.response.data.message)})):this.$qrSecretContainer.html("")}}),new Craft.Mfa}();
//# sourceMappingURL=mfa.js.map