!function(){var t;t=jQuery,Craft.AccountSettingsForm=Garnish.Base.extend({userId:null,isCurrent:null,$copyPasswordResetUrlBtn:null,$copyImpersonationUrlBtn:null,$actionBtn:null,confirmDeleteModal:null,$deleteBtn:null,init:function(e,n,s){this.userId=e,this.isCurrent=n,this.setSettings(s,Craft.AccountSettingsForm.defaults),this.$copyPasswordResetUrlBtn=t("#copy-passwordreset-url"),this.$copyImpersonationUrlBtn=t("#copy-impersonation-url"),this.$actionBtn=t("#action-menubtn"),this.$deleteBtn=t("#delete-btn"),this.addListener(this.$copyPasswordResetUrlBtn,"click","handleCopyPasswordResetUrlBtnClick"),this.addListener(this.$copyImpersonationUrlBtn,"click","handleCopyImpersonationUrlBtnClick"),this.addListener(this.$deleteBtn,"click","showConfirmDeleteModal")},handleCopyPasswordResetUrlBtnClick:function(){Craft.elevatedSessionManager.requireElevatedSession(this.getPasswordResetUrl.bind(this))},getPasswordResetUrl:function(){var t=this;this.$actionBtn.addClass("loading");var e={userId:this.userId};Craft.sendActionRequest("POST","users/get-password-reset-url",{data:e}).then((function(e){t.$actionBtn.removeClass("loading"),Craft.ui.createCopyTextPrompt({label:Craft.t("app","Copy the activation URL"),value:e.data.url})})).catch((function(e){e.response,t.$actionBtn.removeClass("loading")}))},handleCopyImpersonationUrlBtnClick:function(){var t=this;this.$actionBtn.addClass("loading");var e={userId:this.userId};Craft.sendActionRequest("POST","users/get-impersonation-url",{data:e}).then((function(e){t.$actionBtn.removeClass("loading"),Craft.ui.createCopyTextPrompt({label:Craft.t("app","Copy the impersonation URL, and open it in a new private window."),value:e.data.url})})).catch((function(e){e.response,t.$actionBtn.removeClass("loading")}))},showConfirmDeleteModal:function(){var t=this;if(this.confirmDeleteModal)this.confirmDeleteModal.show();else{this.$actionBtn.addClass("loading");var e={userId:this.userId};Craft.sendActionRequest("POST","users/user-content-summary",{data:e}).then((function(e){t.$actionBtn.removeClass("loading"),t.confirmDeleteModal=new Craft.DeleteUserModal(t.userId,{contentSummary:e.data,redirect:t.settings.deleteModalRedirect})})).catch((function(e){e.response,t.$actionBtn.removeClass("loading")}))}}},{defaults:{deleteModalRedirect:null}})}();
//# sourceMappingURL=AccountSettingsForm.js.map